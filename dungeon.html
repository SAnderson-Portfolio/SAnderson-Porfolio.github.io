<!DOCTYPE HTML>
<html>
<head>
    <title>Dungeon Generator</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
</head>
<body class="is-preload">

    <!-- Header -->
    <div id="header">

        <div class="top">

            <!-- Logo -->
            <div id="logo">
                <h1 id="title">Steven Anderson</h1>
                <p>Game Programmer</p>
            </div>

            <!-- Nav -->
            <nav id="nav">
                <ul>
                    <li><a href="index.html" id="home">Home</a></li>
                    <li><a href="#Description" id="description">Description</a></li>
                    <li><a href="#Source" id="source-code">Source Code</a></li>
                    <li><a href="#OtherProjects" id="portfolio-link">Other Projects</a></li>
                </ul>
            </nav>

        </div>

        <div class="bottom">

            <!-- Social Icons -->
            <ul class="icons">
                <li><a href="https://twitter.com/SAAnderson94" target="_blank" rel="noopener noreferrer" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
                <li><a href="https://www.linkedin.com/in/stevenanderson94/" target="_blank" rel="noopener noreferrer" class="icon brands fa-linkedin"><span class="label">LinkedIn</span></a></li>
                <li><a href="https://github.com/SAnderson-Portfolio" target="_blank" rel="noopener noreferrer" class="icon brands fa-github"><span class="label">Github</span></a></li>
                <li><a href="mailto: stevenanderson994@gmail.com" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
            </ul>

        </div>

    </div>

    <!-- Main -->
    <div id="main">

        <!-- Description -->
        <section id="Description" class="dungeon">
            <div class="container">

                <header>
                    <h2 class="alt" style="color: #fff">Dungeon Generator</h2>
                </header>
                <p>
                    Development Snapshot<br />
                    <b>Engine</b>: Unreal Engine 4<br />
                    <b>Language</b>: C++<br />
                    <b>Algorithm</b>: Random walk<br />

                </p>
                <p style="text-align:left;">
                    The dungeon generator was made for a currently unfinished project, "Shooter". A method of generating different levels every time the user entered the dungeon was needed and the random walk
                    <a href="https://en.wikipedia.org/wiki/Random_walk" target="_blank" rel="noopener noreferrer" class="fas fa-external-link-alt" style="font-size:16px"></a> algorithm produced good results.
                    <br />
                    Below is a video showing off a few of the maps the algorithm can generate, the values in the video were chosen at random at the time of recording so all the maps are completely random.
                </p>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/rjhIT01g7GM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </section>

        <!-- Source -->
        <section id="Source" class="two">
            <div class="container">
                <h2 class="alt"><strong>Relevant Variable Declarations</strong></h2>
                <pre style="text-align:left;">
                <code>
                        //Direction enumerator
                        UENUM()
                        enum Direction
                        {
                            Up UMETA(DisplayName = "Up"),
                            Down UMETA(DisplayName = "Down"),
                            Left UMETA(DisplayName = "Left"),
                            Right UMETA(DisplayName = "Right"),
                            None UMETA(DisplayName = "None")
                        };

                        //Level array
                        UPROPERTY()
                            TArray<uint8> LevelMap;

                        // The maximum width of the dungeon.
                        UPROPERTY(EditDefaultsOnly, Category = "Rooms")
                            uint8 DungeonWidth = 5;
                        // The maximum height of the dungeon.
                        UPROPERTY(EditDefaultsOnly, Category = "Rooms")
                            uint8 DungeonHeight = 5;
                        // The maximum number of tunnels that can be created.
                        UPROPERTY(EditDefaultsOnly, Category = "Rooms")
                            uint8 MaxTunnels = 5;
                        // The maximum length any given tunnel can be.
                        UPROPERTY(EditDefaultsOnly, Category = "Rooms")
                            uint8 MaxTunnelLength = 5;
                        </code>
                    </pre>
                <h2 class="alt"><strong>Map Generation Function</strong></h2>
                <pre style="text-align:left;">
                <code>
                        void GenerateMap(uint8& StartCol, uint8& StartRow)
                        {

                            uint8 CurrentRow = FMath::RandRange(0, DungeonWidth - 1);//The start row.
                            uint8 CurrentColumn = FMath::RandRange(0, DungeonHeight - 1);//The start column.
                            bool StartSet = false;//Used to set the start position of the map.
                            int8 CurrentDirectionRow = 0;//Direction to go in rows.
                            int8 CurrentDirectionCol = 0;//Direction to go in columns.
                            Direction CurrentDirectionEnum = Direction::None;//Current direction the tunnel is going.
                            Direction LastDirectionEnum = Direction::None;//The last direction a tunnel went in, stops tunnel turning back on itself.
                            uint8 NumberTunnels = 0;//How many tunnels have been created.

                            //While the number of tunnels created is not at the maximum yet.
                            while (NumberTunnels < MaxTunnels)
                            {
                                do
                                {//Select a random direction that is not the same as the previous one.
                                    switch (FMath::RandRange(0, 3))
                                    {
                                    case 0://Up
                                        if (LastDirectionEnum != Direction::Up && LastDirectionEnum != Direction::Down)
                                        {
                                            CurrentDirectionRow = -1;
                                            CurrentDirectionCol = 0;
                                            CurrentDirectionEnum = Direction::Up;
                                        }
                                        break;
                                    case 1://Down
                                        if (LastDirectionEnum != Direction::Down && LastDirectionEnum != Direction::Up)
                                        {
                                            CurrentDirectionRow = 1;
                                            CurrentDirectionCol = 0;
                                            CurrentDirectionEnum = Direction::Down;
                                        }
                                        break;
                                    case 2://Left
                                        if (LastDirectionEnum != Direction::Left && LastDirectionEnum != Direction::Right)
                                        {
                                            CurrentDirectionRow = 0;
                                            CurrentDirectionCol = 1;
                                            CurrentDirectionEnum = Direction::Left;
                                        }
                                    break;
                                    case 3://Right
                                        if (LastDirectionEnum != Direction::Right && LastDirectionEnum != Direction::Left)
                                        {
                                            CurrentDirectionRow = 0;
                                            CurrentDirectionCol = -1;
                                            CurrentDirectionEnum = Direction::Right;
                                        }
                                        break;
                                    default:
                                        UE_LOG(LogTemp, Warning, TEXT("Default reached in random direction"));
                                    }
                                } while (CurrentDirectionEnum == LastDirectionEnum);
                                
                                //Pick a random number between 0 and the maximum tunnel range to make the length of the next tunnel.
                                uint8 RandomLength = FMath::RandRange(0, MaxTunnelLength);
                                uint8 TunnelLength = 0;

                                //While the length of the tunnel is less than the random length picked above.
                                while (TunnelLength < RandomLength)
                                {
                                    if (((CurrentRow == 0) && (CurrentDirectionRow == -1)) ||
                                    ((CurrentColumn == 0) && (CurrentDirectionCol == -1)) ||
                                    ((CurrentRow == DungeonHeight - 1) && (CurrentDirectionRow == 1)) ||
                                    ((CurrentColumn == DungeonWidth - 1) && (CurrentDirectionCol == 1)))
                                    {
                                        break;
                                    }
                                    else
                                    {
                                        LevelMap[(DungeonHeight * CurrentRow) + CurrentColumn] = 0;
                                        CurrentRow += CurrentDirectionRow;
                                        CurrentColumn += CurrentDirectionCol;
                                        TunnelLength++;
                                    }
                                }
                                //If a tunnel has been created then increase then umber of tunnels and update the previous direction.
                                if (TunnelLength > 0)
                                {
                                    LastDirectionEnum = CurrentDirectionEnum;
                                    NumberTunnels++;
                                    if (!StartSet)//If the start position has not been set then set it. 
                                    {
                                        StartCol = CurrentColumn;
                                        StartRow = CurrentRow;
                                        StartSet = true;
                                    }
                                }
                            }

                        }
                    </code>
                </pre>
            </div>
        </section>

        <!-- Other Projects -->
        <section id="OtherProjects" class="two">
            <div class="container">

                <header>
                    <h2>Other Projects</h2>
                </header>

                <p>
                    Quick access section to my other projects.
                </p>

                <div class="row">
                    <div class="col-4 col-12-mobile">
                        <article class="item">
                            <a href="Grapple.html" class="image fit"><img src="images/Grapple.gif" alt="Grappling to grapple point." /></a>
                            <header>
                                <h3>Grapple</h3>
                            </header>
                        </article>
                        <article class="item">
                            <a href="SpaceInvasion.html" class="image fit"><img src="images/enemySheet.gif" alt="Enemy animation" /></a>
                            <header>
                                <h3>Space Invasion</h3>
                            </header>
                        </article>
                    </div>
                    <div class="col-4 col-12-mobile">
                        <article class="item">
                            <a href="AudioProject.html" class="image fit"><img src="images/AudioProject.gif" alt="Audio project intro" /></a>
                            <header>
                                <h3>Audio Project</h3>
                            </header>
                        </article>
                        <article class="item">
                            <a href="Lochsite.html" class="image fit"><img src="images/Lochsite.gif" alt="Roots being cut in game" /></a>
                            <header>
                                <h3>Lochsite</h3>
                            </header>
                        </article>
                    </div>
                    <div class="col-4 col-12-mobile">
                        <article class="item">
                            <a href="AStar.html" class="image fit"><img src="images/AStar.gif" alt="AStar making a path." /></a>
                            <header>
                                <h3>A*</h3>
                            </header>
                        </article>
                        <article class="item">
                            <a href="AICar.html" class="image fit"><img src="images/AICar.gif" alt="Car turning a corner" /></a>
                            <header>
                                <h3>AI Car</h3>
                            </header>
                        </article>
                    </div>
                </div>

            </div>
        </section>

        <!-- Footer -->
        <div id="footer">

            <!-- Copyright -->
            <ul class="copyright">
                <li>&copy; 2021 Steven Anderson. All rights reserved.</li>
                <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
            </ul>

        </div>
    </div>

   

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

</body>
</html>